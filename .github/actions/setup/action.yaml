name: "CI Setup"
description: "Checkout, setup Go, Node, and dependencies"

runs:
  using: "composite"
  steps:
    - name: Checkout code
      uses: actions/checkout@v5
      with:
        fetch-depth: 0

    - name: Set up Go
      uses: actions/setup-go@v5
      with:
        go-version: "1.25.3"
        cache: true

    - name: Set up Node
      uses: actions/setup-node@v6
      with:
        node-version: "lts/*"

    - name: Install Brew
      run: /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
      shell: bash

    - name: Setup Biome
      uses: biomejs/setup-biome@v2
      with:
        # This should match the schema version defined in boime.json
        version: "1.8.3"

    - name: Install dependencies
      run: |
        export PATH="/home/linuxbrew/.linuxbrew/bin:$PATH"
        make setup
      shell: bash
